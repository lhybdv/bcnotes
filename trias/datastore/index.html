



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="刘挥宇的学习笔记">
      
      
        <link rel="canonical" href="https://lhybdv.github.io/bcnotes/trias/datastore/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="cn">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>数据层 - 区块链数据存储与同步</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@7.1.2/dist/mermaid.css">
    
      <link rel="stylesheet" href="../../css/solarized-dark.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#trias" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://lhybdv.github.io/bcnotes" title="区块链数据存储与同步" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                区块链数据存储与同步
              </span>
              <span class="md-header-nav__topic">
                数据层
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
      
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">
            刘挥宇的学习笔记
          </span>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://lhybdv.github.io/bcnotes" title="区块链数据存储与同步" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    区块链数据存储与同步
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      比特币
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        比特币
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../bitcoin/structure/" title="结构" class="md-nav__link">
      结构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bitcoin/protocal/" title="通信协议" class="md-nav__link">
      通信协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bitcoin/sync/" title="同步" class="md-nav__link">
      同步
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bitcoin/QA/" title="QA" class="md-nav__link">
      QA
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      以太坊
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        以太坊
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ethereum/structure/" title="结构" class="md-nav__link">
      结构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ethereum/protocal/" title="通信协议" class="md-nav__link">
      通信协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ethereum/sync/" title="同步" class="md-nav__link">
      同步
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ethereum/QA/" title="QA" class="md-nav__link">
      QA
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      超级账本
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        超级账本
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../hyperledger/structure.md" title="结构" class="md-nav__link">
      结构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hyperledger/protocal.md" title="通信协议" class="md-nav__link">
      通信协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hyperledger/sync.md" title="同步" class="md-nav__link">
      同步
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hyperledger/QA.md" title="QA" class="md-nav__link">
      QA
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      EOS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        EOS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../eos/structure/" title="结构" class="md-nav__link">
      结构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../eos/protocal.md" title="通信协议" class="md-nav__link">
      通信协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../eos/sync.md" title="同步" class="md-nav__link">
      同步
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../eos/QA.md" title="QA" class="md-nav__link">
      QA
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Trias
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Trias
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        数据层
      </label>
    
    <a href="./" title="数据层" class="md-nav__link md-nav__link--active">
      数据层
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" title="1. 两个概念" class="md-nav__link">
    1. 两个概念
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" title="1.1 条目" class="md-nav__link">
    1.1 条目
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" title="1.1.1 什么是条目" class="md-nav__link">
    1.1.1 什么是条目
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112" title="1.1.2 条目的优点" class="md-nav__link">
    1.1.2 条目的优点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" title="1.2 文件仓库" class="md-nav__link">
    1.2 文件仓库
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-ipfs" title="1.2.1 为什么不直接用 IPFS，还要提出文件仓库" class="md-nav__link">
    1.2.1 为什么不直接用 IPFS，还要提出文件仓库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122" title="1.2.2 为什么不存储区块文件，而是存储条目文件" class="md-nav__link">
    1.2.2 为什么不存储区块文件，而是存储条目文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123" title="1.2.3 仓库文件索引" class="md-nav__link">
    1.2.3 仓库文件索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1_1" title="1. 存储结构" class="md-nav__link">
    1. 存储结构
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11_1" title="1.1 文件系统" class="md-nav__link">
    1.1 文件系统
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11_2" title="1.1 文件存储的优势" class="md-nav__link">
    1.1 文件存储的优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12_1" title="1.2 基础数据结构" class="md-nav__link">
    1.2 基础数据结构
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-block" title="1.2.1 Block" class="md-nav__link">
    1.2.1 Block
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-header" title="1.2.2 Header" class="md-nav__link">
    1.2.2 Header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123_1" title="1.2.3 条目" class="md-nav__link">
    1.2.3 条目
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12_2" title="1.2 索引系统" class="md-nav__link">
    1.2 索引系统
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" title="2 节点分工" class="md-nav__link">
    2 节点分工
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" title="2.1 全节点" class="md-nav__link">
    2.1 全节点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" title="2.2 轻节点" class="md-nav__link">
    2.2 轻节点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" title="2.3 客户节点" class="md-nav__link">
    2.3 客户节点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="3 同步" class="md-nav__link">
    3 同步
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" title="3.1 被动同步" class="md-nav__link">
    3.1 被动同步
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311" title="3.1.1 被动同步时机" class="md-nav__link">
    3.1.1 被动同步时机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3111-newblockhashmsg" title="3.1.1.1 NewBlockHashMsg" class="md-nav__link">
    3.1.1.1 NewBlockHashMsg
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32" title="3.2 主动同步" class="md-nav__link">
    3.2 主动同步
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321" title="3.2.1 主动同步时机" class="md-nav__link">
    3.2.1 主动同步时机
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3211" title="3.2.1.1 新节点加入" class="md-nav__link">
    3.2.1.1 新节点加入
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" title="1. 两个概念" class="md-nav__link">
    1. 两个概念
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" title="1.1 条目" class="md-nav__link">
    1.1 条目
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" title="1.1.1 什么是条目" class="md-nav__link">
    1.1.1 什么是条目
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112" title="1.1.2 条目的优点" class="md-nav__link">
    1.1.2 条目的优点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" title="1.2 文件仓库" class="md-nav__link">
    1.2 文件仓库
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-ipfs" title="1.2.1 为什么不直接用 IPFS，还要提出文件仓库" class="md-nav__link">
    1.2.1 为什么不直接用 IPFS，还要提出文件仓库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122" title="1.2.2 为什么不存储区块文件，而是存储条目文件" class="md-nav__link">
    1.2.2 为什么不存储区块文件，而是存储条目文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123" title="1.2.3 仓库文件索引" class="md-nav__link">
    1.2.3 仓库文件索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1_1" title="1. 存储结构" class="md-nav__link">
    1. 存储结构
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11_1" title="1.1 文件系统" class="md-nav__link">
    1.1 文件系统
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11_2" title="1.1 文件存储的优势" class="md-nav__link">
    1.1 文件存储的优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12_1" title="1.2 基础数据结构" class="md-nav__link">
    1.2 基础数据结构
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-block" title="1.2.1 Block" class="md-nav__link">
    1.2.1 Block
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-header" title="1.2.2 Header" class="md-nav__link">
    1.2.2 Header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123_1" title="1.2.3 条目" class="md-nav__link">
    1.2.3 条目
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12_2" title="1.2 索引系统" class="md-nav__link">
    1.2 索引系统
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" title="2 节点分工" class="md-nav__link">
    2 节点分工
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" title="2.1 全节点" class="md-nav__link">
    2.1 全节点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" title="2.2 轻节点" class="md-nav__link">
    2.2 轻节点
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" title="2.3 客户节点" class="md-nav__link">
    2.3 客户节点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="3 同步" class="md-nav__link">
    3 同步
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" title="3.1 被动同步" class="md-nav__link">
    3.1 被动同步
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311" title="3.1.1 被动同步时机" class="md-nav__link">
    3.1.1 被动同步时机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3111-newblockhashmsg" title="3.1.1.1 NewBlockHashMsg" class="md-nav__link">
    3.1.1.1 NewBlockHashMsg
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32" title="3.2 主动同步" class="md-nav__link">
    3.2 主动同步
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321" title="3.2.1 主动同步时机" class="md-nav__link">
    3.2.1 主动同步时机
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3211" title="3.2.1.1 新节点加入" class="md-nav__link">
    3.2.1.1 新节点加入
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="trias">Trias 数据存储<a class="headerlink" href="#trias" title="Permanent link">&para;</a></h1>
<h2 id="1">1. 两个概念<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="11">1.1 条目<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<p>以往的区块链如比特币，以太坊，块体里面的结构的格式是固定的。不管是 UTXO 的形式，还是智能合约的形式，格式上都是已经约定好的。为了能够在数据保存上处理的更加灵活，我们提出条目的概念。区块体中存储着的是条目的集合。</p>
<h4 id="111">1.1.1 什么是条目<a class="headerlink" href="#111" title="Permanent link">&para;</a></h4>
<p>条目是一个很宽泛的概念。它是一个格式自解释的数据块，是各种交易形式的一种抽象。格式如下:</p>
<table>
<thead>
<tr>
<th>大小(字节)</th>
<th>名称</th>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>itemType</td>
<td>uint32</td>
<td>类型</td>
</tr>
<tr>
<td>varint</td>
<td>payloadSize</td>
<td>uint32</td>
<td>载荷大小</td>
</tr>
<tr>
<td>varies</td>
<td>payload</td>
<td>[]byte</td>
<td>载荷</td>
</tr>
</tbody>
</table>
<p>对每一种类型，payload 都对应着不同的结构。</p>
<h4 id="112">1.1.2 条目的优点<a class="headerlink" href="#112" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>不管是 UTXO 的形式，还是智能合约的形式，只要定义好了结构和相应的解析逻辑，把它们作为条目的 payload 部分，从外面看都是一个条目，这就为不同的业务逻辑存储成相同形式带来了可能。</p>
</li>
<li>
<p>如果现有的数据格式不足以满足新增的业务逻辑，那么可以定义新的数据格式，并定义对应的 itemType，如果已有的格式需要更新，也可以定义基于原来格式的新格式，毕竟区块链的数据是不能篡改的，同时，这也符合了面向对象设计中的 "对修改关闭，对扩展开放" 的开闭原则。使系统可以向后兼容。</p>
</li>
</ol>
<h3 id="12">1.2 文件仓库<a class="headerlink" href="#12" title="Permanent link">&para;</a></h3>
<p>比特币，超级账本中都是以区块为单位，多个区块保存到一个区块文件中。EOS 在与 IPFS 的结合中，把交易保存成文件，区块中保存了对交易的引用。显然 EOS 的做法，更加灵活。因为各交易被打包到一个区块中，只是时间相近，所以在存储中物理相邻，它们多数情况下并没有逻辑上的必然联系。所以我们提出文件仓库的概念，主要用来存储条目(也有其他文件，如状态文件等)，一个条目一个文件，区块中只保留文件的索引，索引有可能是 IPFS 的 FileId，或其他。</p>
<h4 id="121-ipfs">1.2.1 为什么不直接用 IPFS，还要提出文件仓库<a class="headerlink" href="#121-ipfs" title="Permanent link">&para;</a></h4>
<p>文件仓库是一个抽象，IPFS 只是真实存储文件的方式之一，我们可以使用 IPFS，也可以使用其他类似系统，甚至自己实现，或是几种方式的结合。对于想要获取条目内容的节点来说，可以不必关心实现方式。同时，为今后系统的扩容带来了更多的选择。</p>
<h4 id="122">1.2.2 为什么不存储区块文件，而是存储条目文件<a class="headerlink" href="#122" title="Permanent link">&para;</a></h4>
<p>如前面所说，多个条目逻辑上很可能没有任何关系，假设一个节点想要获取某个条目的内容，而首先获取了整个区块，然后再进行解析，势必加大了无效的数据传输，而影响了系统性能。</p>
<h4 id="123">1.2.3 仓库文件索引<a class="headerlink" href="#123" title="Permanent link">&para;</a></h4>
<p>仓库文件索引是独立于第三方系统的文件唯一标识，不等同于 IPFS 的 FileId，假如我们使用 IPFS 来存储文件，那么需要维护一个仓库文件索引与 IPFS 的 FileId 的映射关系。</p>
<h2 id="1_1">1. 存储结构<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h2>
<h3 id="11_1">1.1 文件系统<a class="headerlink" href="#11_1" title="Permanent link">&para;</a></h3>
<p>文件系统用来存储区块数据，状态数据，历史数据，以二进制数据文件或文本文件来存储。</p>
<h4 id="11_2">1.1 文件存储的优势<a class="headerlink" href="#11_2" title="Permanent link">&para;</a></h4>
<ol>
<li>不受平台影响(操作系统)</li>
<li>不需要更多依赖(相对于数据库来说)</li>
<li>便于与 IPFS 这种去中心化文件系统进行对接</li>
<li>适当的对文件大小进行规划，对文件进行组织，便于传播</li>
</ol>
<h4 id="12_1">1.2 基础数据结构<a class="headerlink" href="#12_1" title="Permanent link">&para;</a></h4>
<h5 id="121-block">1.2.1 Block<a class="headerlink" href="#121-block" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>大小(字节)</th>
<th>名称</th>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>magicNumber</td>
<td>uint32</td>
<td>值 待定, 作为区块之间的分隔符</td>
</tr>
<tr>
<td>4</td>
<td>blockSize</td>
<td>uint32</td>
<td>后面数据到块结束的字节数</td>
</tr>
<tr>
<td>68</td>
<td>blockHeader</td>
<td>[]byte</td>
<td>块头 (大小待定)</td>
</tr>
<tr>
<td>varint</td>
<td>itemCount</td>
<td>uint64</td>
<td>条目数量</td>
</tr>
<tr>
<td>varies</td>
<td>itemIndex</td>
<td>[32]byte</td>
<td>条目索引集合</td>
</tr>
</tbody>
</table>
<h5 id="122-header">1.2.2 Header<a class="headerlink" href="#122-header" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>大小(字节)</th>
<th>名称</th>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>version</td>
<td>uint32</td>
<td>版本号</td>
</tr>
<tr>
<td>32</td>
<td>previous_block_hash</td>
<td>[32]byte</td>
<td>前一个 block 的 hash 值</td>
</tr>
<tr>
<td>32</td>
<td>merkle_root_hash</td>
<td>[32]byte</td>
<td>区块内所有 Item 的 merkle_hash 值</td>
</tr>
</tbody>
</table>
<div class="admonition todo">
<p class="admonition-title">Header 中的其他项待定</p>
<p>比如比特币中的 Hash 难度值，计算用的随机数 Nonce 跟共识算法相关，这里待定</p>
</div>
<h5 id="123_1">1.2.3 条目<a class="headerlink" href="#123_1" title="Permanent link">&para;</a></h5>
<div class="admonition note">
<p class="admonition-title">条目 (Item)</p>
<p>条目 是一个宽泛的概念，它可以是类似比特币的交易，也可以是类似以太坊的交易，这样可以带来两个好处：</p>
<ol>
<li>使得账号状态，UTXO 两种不同机制的数据可以共存</li>
<li>对已有结构进行改进，可以重新定义一个 itemType 及其解释方式</li>
</ol>
</div>
<h3 id="12_2">1.2 索引系统<a class="headerlink" href="#12_2" title="Permanent link">&para;</a></h3>
<p>用来快速定位存储内容。通过索引可以快速定位到 Block，Item (各种交易或其他数据形式)，以及 Item 当中子项。索引系统使用 levelDB。</p>
<h2 id="2">2 节点分工<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<p><img alt="uml diagram" classes="uml" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U2NyaXB0VHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCIgY29udGVudFN0eWxlVHlwZT0idGV4dC9jc3MiIGhlaWdodD0iNTIzcHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDo2OTdweDtoZWlnaHQ6NTIzcHg7YmFja2dyb3VuZDojMDAyQTM2OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjk3IDUyMyIgd2lkdGg9IjY5N3B4IiB6b29tQW5kUGFuPSJtYWduaWZ5Ij48ZGVmcz48ZmlsdGVyIGhlaWdodD0iMzAwJSIgaWQ9ImYxcnN6c3dqZXNtZWptIiB3aWR0aD0iMzAwJSIgeD0iLTEiIHk9Ii0xIj48ZmVHYXVzc2lhbkJsdXIgcmVzdWx0PSJibHVyT3V0IiBzdGREZXZpYXRpb249IjIuMCIvPjxmZUNvbG9yTWF0cml4IGluPSJibHVyT3V0IiByZXN1bHQ9ImJsdXJPdXQyIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgLjQgMCIvPjxmZU9mZnNldCBkeD0iNC4wIiBkeT0iNC4wIiBpbj0iYmx1ck91dDIiIHJlc3VsdD0iYmx1ck91dDMiLz48ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJibHVyT3V0MyIgbW9kZT0ibm9ybWFsIi8+PC9maWx0ZXI+PC9kZWZzPjxnPjwhLS1jbHVzdGVyIEZ1bGxOb2Rlcy0tPjxwb2x5Z29uIGZpbGw9IiMwMDJBMzYiIGZpbHRlcj0idXJsKCNmMXJzenN3amVzbWVqbSkiIHBvaW50cz0iMzU0LDIyNS41LDQwMiwyMjUuNSw0MDksMjQ3Ljk4ODMsNTgzLDI0Ny45ODgzLDU4MywyOTYuNSwzNTQsMjk2LjUsMzU0LDIyNS41IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSIzNTQiIHgyPSI0MDkiIHkxPSIyNDcuOTg4MyIgeTI9IjI0Ny45ODgzIi8+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjQyIiB4PSIzNTgiIHk9IjI0MS4wMzUyIj7lhajoioLngrk8L3RleHQ+PCEtLWNsdXN0ZXIgTGlnaHROb2Rlcy0tPjxwb2x5Z29uIGZpbGw9IiMwMDJBMzYiIGZpbHRlcj0idXJsKCNmMXJzenN3amVzbWVqbSkiIHBvaW50cz0iMjEzLDM0MS41LDI2MSwzNDEuNSwyNjgsMzYzLjk4ODMsNjU0LDM2My45ODgzLDY1NCw0MTIuNSwyMTMsNDEyLjUsMjEzLDM0MS41IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSIyMTMiIHgyPSIyNjgiIHkxPSIzNjMuOTg4MyIgeTI9IjM2My45ODgzIi8+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjQyIiB4PSIyMTciIHk9IjM1Ny4wMzUyIj7ovbvoioLngrk8L3RleHQ+PCEtLWNsdXN0ZXIgQ2xpZW50Tm9kZXMtLT48cG9seWdvbiBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBwb2ludHM9IjE3OCw0NDAsMjQwLDQ0MCwyNDcsNDYyLjQ4ODMsNjc1LDQ2Mi40ODgzLDY3NSw1MTEsMTc4LDUxMSwxNzgsNDQwIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSIxNzgiIHgyPSIyNDciIHkxPSI0NjIuNDg4MyIgeTI9IjQ2Mi40ODgzIi8+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjU2IiB4PSIxODIiIHk9IjQ1NS41MzUyIj7lrqLmiLfoioLngrk8L3RleHQ+PCEtLWVudGl0eSBGdWxsTm9kZTItLT48cmVjdCBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBoZWlnaHQ9IjM2LjQ4ODMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjcxIiB4PSI0NjguNSIgeT0iMjUyLjUiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSI0NjMuNSIgeT0iMjU3LjUiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSI0NjMuNSIgeT0iMjc4Ljk4ODMiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI1MSIgeD0iNDc4LjUiIHk9IjI3Ni4wMzUyIj7lhajoioLngrkyPC90ZXh0PjwhLS1lbnRpdHkgRnVsbE5vZGUxLS0+PHJlY3QgZmlsbD0iIzAwMkEzNiIgZmlsdGVyPSJ1cmwoI2YxcnN6c3dqZXNtZWptKSIgaGVpZ2h0PSIzNi40ODgzIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSI3MSIgeD0iMzYyLjUiIHk9IjI1Mi41Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iMzU3LjUiIHk9IjI1Ny41Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iMzU3LjUiIHk9IjI3OC45ODgzIi8+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNTEiIHg9IjM3Mi41IiB5PSIyNzYuMDM1MiI+5YWo6IqC54K5MTwvdGV4dD48IS0tZW50aXR5IExpZ2h0Tm9kZTQtLT48cmVjdCBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBoZWlnaHQ9IjM2LjQ4ODMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjcxIiB4PSI0NjguNSIgeT0iMzY4LjUiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSI0NjMuNSIgeT0iMzczLjUiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSI0NjMuNSIgeT0iMzk0Ljk4ODMiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI1MSIgeD0iNDc4LjUiIHk9IjM5Mi4wMzUyIj7ovbvoioLngrk0PC90ZXh0PjwhLS1lbnRpdHkgTGlnaHROb2RlMy0tPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGZpbHRlcj0idXJsKCNmMXJzenN3amVzbWVqbSkiIGhlaWdodD0iMzYuNDg4MyIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iNzEiIHg9IjU3NC41IiB5PSIzNjguNSIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjU2OS41IiB5PSIzNzMuNSIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjU2OS41IiB5PSIzOTQuOTg4MyIvPjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjUxIiB4PSI1ODQuNSIgeT0iMzkyLjAzNTIiPui9u+iKgueCuTM8L3RleHQ+PCEtLWVudGl0eSBMaWdodE5vZGUyLS0+PHJlY3QgZmlsbD0iIzAwMkEzNiIgZmlsdGVyPSJ1cmwoI2YxcnN6c3dqZXNtZWptKSIgaGVpZ2h0PSIzNi40ODgzIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSI3MSIgeD0iMjU2LjUiIHk9IjM2OC41Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iMjUxLjUiIHk9IjM3My41Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iMjUxLjUiIHk9IjM5NC45ODgzIi8+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNTEiIHg9IjI2Ni41IiB5PSIzOTIuMDM1MiI+6L276IqC54K5MjwvdGV4dD48IS0tZW50aXR5IExpZ2h0Tm9kZTEtLT48cmVjdCBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBoZWlnaHQ9IjM2LjQ4ODMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjcxIiB4PSIzNjIuNSIgeT0iMzY4LjUiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSIzNTcuNSIgeT0iMzczLjUiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSIzNTcuNSIgeT0iMzk0Ljk4ODMiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI1MSIgeD0iMzcyLjUiIHk9IjM5Mi4wMzUyIj7ovbvoioLngrkxPC90ZXh0PjwhLS1lbnRpdHkgQ2xpZW50Tm9kZTQtLT48cmVjdCBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBoZWlnaHQ9IjM2LjQ4ODMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9Ijg1IiB4PSI0NjEuNSIgeT0iNDY3Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iNDU2LjUiIHk9IjQ3MiIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjQ1Ni41IiB5PSI0OTMuNDg4MyIvPjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjY1IiB4PSI0NzEuNSIgeT0iNDkwLjUzNTIiPuWuouaIt+iKgueCuTQ8L3RleHQ+PCEtLWVudGl0eSBDbGllbnROb2RlMy0tPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGZpbHRlcj0idXJsKCNmMXJzenN3amVzbWVqbSkiIGhlaWdodD0iMzYuNDg4MyIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iODUiIHg9IjU4MS41IiB5PSI0NjciLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSI1NzYuNSIgeT0iNDcyIi8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iNTc2LjUiIHk9IjQ5My40ODgzIi8+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNjUiIHg9IjU5MS41IiB5PSI0OTAuNTM1MiI+5a6i5oi36IqC54K5MzwvdGV4dD48IS0tZW50aXR5IENsaWVudE5vZGUyLS0+PHJlY3QgZmlsbD0iIzAwMkEzNiIgZmlsdGVyPSJ1cmwoI2YxcnN6c3dqZXNtZWptKSIgaGVpZ2h0PSIzNi40ODgzIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSI4NSIgeD0iMjIxLjUiIHk9IjQ2NyIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjIxNi41IiB5PSI0NzIiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSIyMTYuNSIgeT0iNDkzLjQ4ODMiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI2NSIgeD0iMjMxLjUiIHk9IjQ5MC41MzUyIj7lrqLmiLfoioLngrkyPC90ZXh0PjwhLS1lbnRpdHkgQ2xpZW50Tm9kZTEtLT48cmVjdCBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBoZWlnaHQ9IjM2LjQ4ODMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9Ijg1IiB4PSIzNDEuNSIgeT0iNDY3Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iMzM2LjUiIHk9IjQ3MiIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjMzNi41IiB5PSI0OTMuNDg4MyIvPjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjY1IiB4PSIzNTEuNSIgeT0iNDkwLjUzNTIiPuWuouaIt+iKgueCuTE8L3RleHQ+PCEtLWVudGl0eSBmaWxlU3RvcmUtLT48cmVjdCBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBoZWlnaHQ9IjM2LjQ4ODMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9Ijc2IiB4PSIzNjYiIHk9IjEyMS41Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iMzYxIiB5PSIxMjYuNSIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjM2MSIgeT0iMTQ3Ljk4ODMiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI1NiIgeD0iMzc2IiB5PSIxNDUuMDM1MiI+5paH5Lu25LuT5bqTPC90ZXh0PjwhLS1lbnRpdHkgSVBGUy0tPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGZpbHRlcj0idXJsKCNmMXJzenN3amVzbWVqbSkiIGhlaWdodD0iMzYuNDg4MyIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iNDgiIHg9IjI2OSIgeT0iOCIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjI2NCIgeT0iMTMiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSIyNjQiIHk9IjM0LjQ4ODMiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIyOCIgeD0iMjc5IiB5PSIzMS41MzUyIj5JUEZTPC90ZXh0PjwhLS1lbnRpdHkg5YW25LuW5paH5Lu257O757ufLS0+PHJlY3QgZmlsbD0iIzAwMkEzNiIgZmlsdGVyPSJ1cmwoI2YxcnN6c3dqZXNtZWptKSIgaGVpZ2h0PSIzNi40ODgzIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMDQiIHg9IjM1MiIgeT0iOCIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjM0NyIgeT0iMTMiLz48cmVjdCBmaWxsPSIjMDAyQTM2IiBoZWlnaHQ9IjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwIiB4PSIzNDciIHk9IjM0LjQ4ODMiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI4NCIgeD0iMzYyIiB5PSIzMS41MzUyIj7lhbbku5bmlofku7bns7vnu588L3RleHQ+PCEtLWVudGl0eSDoh6rlrp7njrDmlofku7bns7vnu58tLT48cmVjdCBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBoZWlnaHQ9IjM2LjQ4ODMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjExOCIgeD0iNDkxIiB5PSI4Ii8+PHJlY3QgZmlsbD0iIzAwMkEzNiIgaGVpZ2h0PSI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMCIgeD0iNDg2IiB5PSIxMyIvPjxyZWN0IGZpbGw9IiMwMDJBMzYiIGhlaWdodD0iNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAiIHg9IjQ4NiIgeT0iMzQuNDg4MyIvPjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9Ijk4IiB4PSI1MDEiIHk9IjMxLjUzNTIiPuiHquWunueOsOaWh+S7tuezu+e7nzwvdGV4dD48cGF0aCBkPSJNNjUuNSwxMTEuNSBMNjUuNSwxNjcuNDMxNiBBMCwwIDAgMCAwIDY1LjUsMTY3LjQzMTYgTDMzMC41LDE2Ny40MzE2IEEwLDAgMCAwIDAgMzMwLjUsMTY3LjQzMTYgTDMzMC41LDE0My41IEwzNjUuOTU2NSwxMzkuNSBMMzMwLjUsMTM1LjUgTDMzMC41LDEyMS41IEwzMjAuNSwxMTEuNSBMNjUuNSwxMTEuNSBBMCwwIDAgMCAwIDY1LjUsMTExLjUgIiBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cGF0aCBkPSJNMzIwLjUsMTExLjUgTDMyMC41LDEyMS41IEwzMzAuNSwxMjEuNSBMMzIwLjUsMTExLjUgIiBmaWxsPSIjMDAyQTM2IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIxODUiIHg9IjcxLjUiIHk9IjEyOS4wNjg0Ij4xLiDlrZjmlL7miYDmnInmnaHnm67mlofku7bvvIznirbmgIHmlofku7Y8L3RleHQ+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMjA2IiB4PSI3MS41IiB5PSIxNDQuMzc4OSI+Mi4g5Li66IqC54K56YCa6L+H5paH5Lu255qE5ZSv5LiA5qCH6K+GKOe0ouW8lSk8L3RleHQ+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMjQ0IiB4PSI3MS41IiB5PSIxNTkuNjg5NSI+My4g57u05oqk57Si5byV5LiO5YW25LuW57O757uf5paH5Lu2IElkIOeahOaYoOWwhOWFs+ezuzwvdGV4dD48cGF0aCBkPSJNNDgzLDEwNCBMNDgzLDE3NS4yNDIyIEw2NjcsMTc1LjI0MjIgTDY2NywxMTQgTDY1NywxMDQgTDQ4MywxMDQgIiBmaWxsPSIjMDAyQTM2IiBmaWx0ZXI9InVybCgjZjFyc3pzd2plc21lam0pIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cGF0aCBkPSJNNjU3LDEwNCBMNjU3LDExNCBMNjY3LDExNCBMNjU3LDEwNCAiIGZpbGw9IiMwMDJBMzYiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjE1OSIgeD0iNDg5IiB5PSIxMjEuNTY4NCI+MS4g5a2Y5pS+5Yy65Z2X5paH5Lu277yM54q25oCB5paH5Lu2PC90ZXh0Pjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjQyIiB4PSI0ODkiIHk9IjEzNi44Nzg5Ij4yLiDpqozor4E8L3RleHQ+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTYzIiB4PSI0ODkiIHk9IjE1Mi4xODk1Ij4zLiDkuIrkvKDmnaHnm67mlofku7bliLAg5paH5Lu25LuT5bqTPC90ZXh0Pjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9Ijk0IiB4PSI0ODkiIHk9IjE2Ny41Ij40LiDnvJPlrZjpg6jliIbmnaHnm648L3RleHQ+PHBhdGggZD0iTTk1LDIzNSBMOTUsMzA2LjI0MjIgTDMyNywzMDYuMjQyMiBMMzI3LDI0NSBMMzE3LDIzNSBMOTUsMjM1ICIgZmlsbD0iIzAwMkEzNiIgZmlsdGVyPSJ1cmwoI2YxcnN6c3dqZXNtZWptKSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBhdGggZD0iTTMxNywyMzUgTDMxNywyNDUgTDMyNywyNDUgTDMxNywyMzUgIiBmaWxsPSIjMDAyQTM2IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIxMjAiIHg9IjEwMSIgeT0iMjUyLjU2ODQiPjEuIOWtmOaUvuaJgOacieadoeebruWTiOW4jDwvdGV4dD48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIyMTEiIHg9IjEwMSIgeT0iMjY3Ljg3ODkiPjIuIOaMieeFp+WuouaIt+iKgueCueeahOS6pOaYk+ivt+axguW9ouaIkOadoeebrjwvdGV4dD48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI2OCIgeD0iMTAxIiB5PSIyODMuMTg5NSI+My4g6YOo5YiG6aqM6K+BPC90ZXh0Pjx0ZXh0IGZpbGw9IiNDQ0NDQ0MiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjE1OSIgeD0iMTAxIiB5PSIyOTguNSI+NC4g5omT5YyF5Yy65Z2X77yM5LiK5Lyg57uZ5YWo6IqC54K5PC90ZXh0PjxwYXRoIGQ9Ik02LDM2NiBMNiw0MDYuNjIxMSBMMTg2LDQwNi42MjExIEwxODYsMzc2IEwxNzYsMzY2IEw2LDM2NiAiIGZpbGw9IiMwMDJBMzYiIGZpbHRlcj0idXJsKCNmMXJzenN3amVzbWVqbSkiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwYXRoIGQ9Ik0xNzYsMzY2IEwxNzYsMzc2IEwxODYsMzc2IEwxNzYsMzY2ICIgZmlsbD0iIzAwMkEzNiIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHRleHQgZmlsbD0iI0NDQ0NDQyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTU5IiB4PSIxMiIgeT0iMzgzLjU2ODQiPjEuIOWtmOaUvuS4juacrOiKgueCueebuOWFs+eahOS/oeaBrzwvdGV4dD48dGV4dCBmaWxsPSIjQ0NDQ0NDIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIxNDYiIHg9IjEyIiB5PSIzOTguODc4OSI+Mi4g5Y+R6YCB5Lqk5piT6K+35rGC57uZ6L276IqC54K5PC90ZXh0PjwhLS1saW5rIElQRlMgdG8gZmlsZVN0b3JlLS0+PHBhdGggZD0iTTMxNC4zNDcsNDcuODI3OCBDMzM1LjIyMzQsNjkuMTc0MyAzNjYuNjQ3LDEwMS4zMDU4IDM4Ni4yMTAyLDEyMS4zMDk1ICIgZmlsbD0ibm9uZSIgaWQ9IklQRlMtZmlsZVN0b3JlIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjMxMC44MzQxLDQ0LjIzNTcsMzE0LjI2NjksNTMuNDY2OSwzMTQuMzMsNDcuODEwNCwzMTkuOTg2NSw0Ny44NzM1LDMxMC44MzQxLDQ0LjIzNTciIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1saW5rIOWFtuS7luaWh+S7tuezu+e7nyB0byBmaWxlU3RvcmUtLT48cGF0aCBkPSJNNDA0LDQ5LjQzNTEgQzQwNCw3MC43NjAyIDQwNCwxMDEuODAxNyA0MDQsMTIxLjMwOTUgIiBmaWxsPSJub25lIiBpZD0i5YW25LuW5paH5Lu257O757ufLWZpbGVTdG9yZSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmlsbD0iI0NDQ0NDQyIgcG9pbnRzPSI0MDQsNDQuMjM1Nyw0MDAsNTMuMjM1Nyw0MDQsNDkuMjM1Nyw0MDgsNTMuMjM1Nyw0MDQsNDQuMjM1NyIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PCEtLWxpbmsg6Ieq5a6e546w5paH5Lu257O757ufIHRvIGZpbGVTdG9yZS0tPjxwYXRoIGQ9Ik01MjIuMjYxNiw0Ny41NjM3IEM0OTQuODA0OCw2OC45MDg2IDQ1My4yMzczLDEwMS4yMjMxIDQyNy4zOTkyLDEyMS4zMDk1ICIgZmlsbD0ibm9uZSIgaWQ9IuiHquWunueOsOaWh+S7tuezu+e7ny1maWxlU3RvcmUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwb2x5Z29uIGZpbGw9IiNDQ0NDQ0MiIHBvaW50cz0iNTI2LjU0MjYsNDQuMjM1Nyw1MTYuOTgyMSw0Ni42MDEzLDUyMi41OTUxLDQ3LjMwNDQsNTIxLjg5Miw1Mi45MTc0LDUyNi41NDI2LDQ0LjIzNTciIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1saW5rIGZpbGVTdG9yZSB0byBGdWxsTm9kZTEtLT48cGF0aCBkPSJNNDAyLjkyNTksMTYyLjk1MDQgQzQwMS43NTEyLDE4OC41OTkgMzk5Ljg5MzksMjI5LjE1IDM5OC44MjcyLDI1Mi40Mzk3ICIgZmlsbD0ibm9uZSIgaWQ9ImZpbGVTdG9yZS1GdWxsTm9kZTEiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwb2x5Z29uIGZpbGw9IiNDQ0NDQ0MiIHBvaW50cz0iNDAzLjE2NTcsMTU3LjcxNSwzOTguNzU3OSwxNjYuNTIyNSw0MDIuOTM2OCwxNjIuNzA5OCw0MDYuNzQ5NiwxNjYuODg4Nyw0MDMuMTY1NywxNTcuNzE1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48IS0tbGluayBmaWxlU3RvcmUgdG8gRnVsbE5vZGUyLS0+PHBhdGggZD0iTTQyMS4xNjkyLDE2MS45OTE2IEM0NDAuNzAxLDE4Ny41NzgzIDQ3Mi4yMTE5LDIyOC44NTc2IDQ5MC4yMTM1LDI1Mi40Mzk3ICIgZmlsbD0ibm9uZSIgaWQ9ImZpbGVTdG9yZS1GdWxsTm9kZTIiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwb2x5Z29uIGZpbGw9IiNDQ0NDQ0MiIHBvaW50cz0iNDE3LjkwNDYsMTU3LjcxNSw0MjAuMTg2LDE2Ny4yOTYsNDIwLjkzODQsMTYxLjY4OTQsNDI2LjU0NSwxNjIuNDQxOSw0MTcuOTA0NiwxNTcuNzE1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48IS0tbGluayBHTU4yNyB0byBGdWxsTm9kZXMtLT48cGF0aCBkPSJNNTc1LDE3NS4yOTYzIEM1NzUsMTg0LjM4NjkgNTc1LDE5NC40NDYgNTc1LDIwNC41MjAyIEM1NzUsMjA5LjU1NzMgNTc1LDIxNC41OTgyIDU3NSwyMTkuNTIzNyBDNTc1LDIyMC43NTUxIDU3NSwyMjEuOTc5MyA1NzUsMjIzLjE5NDQgQzU3NSwyMjMuODAxOSA1NzUsMjI0LjQwNzIgNTc1LDIyNS4wMSBDNTc1LDIyNS4xNjA3IDU3NSwyNDEuODM3OSA1NzUsMjQxLjk4ODMgIiBmaWxsPSJub25lIiBpZD0iR01OMjctRnVsbE5vZGVzIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsgc3Ryb2tlLWRhc2hhcnJheTogNy4wLDcuMDsiLz48IS0tbGluayBGdWxsTm9kZTEgdG8gTGlnaHROb2RlMS0tPjxwYXRoIGQ9Ik0zOTgsMjkzLjY3NDkgQzM5OCwzMTUuNTYyOSAzOTgsMzQ3Ljk1ODMgMzk4LDM2OC4xMTk1ICIgZmlsbD0ibm9uZSIgaWQ9IkZ1bGxOb2RlMS1MaWdodE5vZGUxIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjM5OCwyODguNjI1LDM5NCwyOTcuNjI1LDM5OCwyOTMuNjI1LDQwMiwyOTcuNjI1LDM5OCwyODguNjI1IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48IS0tbGluayBGdWxsTm9kZTEgdG8gTGlnaHROb2RlMi0tPjxwYXRoIGQ9Ik0zNzcuODI3NCwyOTIuNTc1NyBDMzU3LjgyNDMsMzE0LjQ2NTkgMzI3LjUzMDEsMzQ3LjYxOCAzMDguNzk2LDM2OC4xMTk1ICIgZmlsbD0ibm9uZSIgaWQ9IkZ1bGxOb2RlMS1MaWdodE5vZGUyIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjM4MS40Mzc1LDI4OC42MjUsMzcyLjQxMzYsMjkyLjU3MDcsMzc4LjA2NDcsMjkyLjMxNjEsMzc4LjMxOTMsMjk3Ljk2NzIsMzgxLjQzNzUsMjg4LjYyNSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PCEtLWxpbmsgR01OMzIgdG8gTGlnaHROb2Rlcy0tPjxwYXRoIGQ9Ik0yMTQuMDgxOSwzMDYuMjUwMyBDMjE0Ljc3MDYsMzE0LjIzODcgMjE1LjUxNjQsMzIyLjg5MDcgMjE2LjI1NDksMzMxLjQ1NjUgQzIxNi40Mzk1LDMzMy41OTggMjE2LjYyMzYsMzM1LjczNDEgMjE2LjgwNjMsMzM3Ljg1MyBDMjE2Ljg5NzYsMzM4LjkxMjUgMjE2Ljk4ODYsMzM5Ljk2NzcgMjE3LjA3OTEsMzQxLjAxNzIgQzIxNy4wOTA0LDM0MS4xNDg0IDIxNy4xMDE3LDM0MS4yNzk1IDIxNy4xMTMsMzQxLjQxMDUgIiBmaWxsPSJub25lIiBpZD0iR01OMzItTGlnaHROb2RlcyIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7IHN0cm9rZS1kYXNoYXJyYXk6IDcuMCw3LjA7Ii8+PCEtLWxpbmsgRnVsbE5vZGUyIHRvIExpZ2h0Tm9kZTMtLT48cGF0aCBkPSJNNTI0LjE3MjYsMjkyLjU3NTcgQzU0NC4xNzU3LDMxNC40NjU5IDU3NC40Njk5LDM0Ny42MTggNTkzLjIwNCwzNjguMTE5NSAiIGZpbGw9Im5vbmUiIGlkPSJGdWxsTm9kZTItTGlnaHROb2RlMyIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmlsbD0iI0NDQ0NDQyIgcG9pbnRzPSI1MjAuNTYyNSwyODguNjI1LDUyMy42ODA3LDI5Ny45NjcyLDUyMy45MzUzLDI5Mi4zMTYxLDUyOS41ODY0LDI5Mi41NzA3LDUyMC41NjI1LDI4OC42MjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1saW5rIEZ1bGxOb2RlMiB0byBMaWdodE5vZGU0LS0+PHBhdGggZD0iTTUwNCwyOTMuNjc0OSBDNTA0LDMxNS41NjI5IDUwNCwzNDcuOTU4MyA1MDQsMzY4LjExOTUgIiBmaWxsPSJub25lIiBpZD0iRnVsbE5vZGUyLUxpZ2h0Tm9kZTQiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwb2x5Z29uIGZpbGw9IiNDQ0NDQ0MiIHBvaW50cz0iNTA0LDI4OC42MjUsNTAwLDI5Ny42MjUsNTA0LDI5My42MjUsNTA4LDI5Ny42MjUsNTA0LDI4OC42MjUiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1saW5rIEdNTjM3IHRvIENsaWVudE5vZGVzLS0+PHBhdGggZD0iTTExNS4wODY3LDQwNy4zODkzIEMxMjcuNDcwNSw0MjAuOTQyNiAxNDMuODI2LDQzOC44NDI5IDE1Ny43MDg3LDQ1NC4wMzY4IEMxNjQuNjUwMSw0NjEuNjMzNyAxNzAuOTczMiw0NjguNTU0IDE3NS44NzI2LDQ3My45MTYxIEMxNzYuNDg1LDQ3NC41ODY0IDE3Ny4wNzUyLDQ3NS4yMzIzIDE3Ny42NDE2LDQ3NS44NTIyIEMxNzcuNzEyNCw0NzUuOTI5NyAxNzcuNzgyOCw0NzYuMDA2NyAxNzcuODUyOCw0NzYuMDgzNCAiIGZpbGw9Im5vbmUiIGlkPSJHTU4zNy1DbGllbnROb2RlcyIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7IHN0cm9rZS1kYXNoYXJyYXk6IDcuMCw3LjA7Ii8+PCEtLWxpbmsgTGlnaHROb2RlMSB0byBDbGllbnROb2RlMS0tPjxwYXRoIGQ9Ik0zOTQuNjk0Miw0MDkuNzU4NCBDMzkyLjIyMDMsNDI3LjE2NDQgMzg4Ljg4MzUsNDUwLjY0MTEgMzg2LjU5ODksNDY2LjcxNDUgIiBmaWxsPSJub25lIiBpZD0iTGlnaHROb2RlMS1DbGllbnROb2RlMSIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmlsbD0iI0NDQ0NDQyIgcG9pbnRzPSIzOTUuNDMyMiw0MDQuNTY2NCwzOTAuMjA1Myw0MTIuOTEzOSwzOTQuNzI4NSw0MDkuNTE2NiwzOTguMTI1Nyw0MTQuMDM5OCwzOTUuNDMyMiw0MDQuNTY2NCIgc3R5bGU9InN0cm9rZTogI0NDQ0NDQzsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PCEtLWxpbmsgTGlnaHROb2RlMiB0byBDbGllbnROb2RlMi0tPjxwYXRoIGQ9Ik0yODUuMzg4NSw0MDkuNzU4NCBDMjgwLjQ0MDYsNDI3LjE2NDQgMjczLjc2Nyw0NTAuNjQxMSAyNjkuMTk3OSw0NjYuNzE0NSAiIGZpbGw9Im5vbmUiIGlkPSJMaWdodE5vZGUyLUNsaWVudE5vZGUyIiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjI4Ni44NjQ0LDQwNC41NjY0LDI4MC41NTYsNDEyLjEyOTgsMjg1LjQ5NzMsNDA5LjM3NTksMjg4LjI1MTIsNDE0LjMxNzEsMjg2Ljg2NDQsNDA0LjU2NjQiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1saW5rIExpZ2h0Tm9kZTMgdG8gQ2xpZW50Tm9kZTMtLT48cGF0aCBkPSJNNjEzLjMwNTgsNDA5Ljc1ODQgQzYxNS43Nzk3LDQyNy4xNjQ0IDYxOS4xMTY1LDQ1MC42NDExIDYyMS40MDExLDQ2Ni43MTQ1ICIgZmlsbD0ibm9uZSIgaWQ9IkxpZ2h0Tm9kZTMtQ2xpZW50Tm9kZTMiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwb2x5Z29uIGZpbGw9IiNDQ0NDQ0MiIHBvaW50cz0iNjEyLjU2NzgsNDA0LjU2NjQsNjA5Ljg3NDMsNDE0LjAzOTgsNjEzLjI3MTUsNDA5LjUxNjYsNjE3Ljc5NDcsNDEyLjkxMzksNjEyLjU2NzgsNDA0LjU2NjQiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1saW5rIExpZ2h0Tm9kZTQgdG8gQ2xpZW50Tm9kZTQtLT48cGF0aCBkPSJNNTA0LDQwOS43NTg0IEM1MDQsNDI3LjE2NDQgNTA0LDQ1MC42NDExIDUwNCw0NjYuNzE0NSAiIGZpbGw9Im5vbmUiIGlkPSJMaWdodE5vZGU0LUNsaWVudE5vZGU0IiBzdHlsZT0ic3Ryb2tlOiAjQ0NDQ0NDOyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjUwNCw0MDQuNTY2NCw1MDAsNDEzLjU2NjQsNTA0LDQwOS41NjY0LDUwOCw0MTMuNTY2NCw1MDQsNDA0LjU2NjQiIHN0eWxlPSJzdHJva2U6ICNDQ0NDQ0M7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS0KQHN0YXJ0dW1sDQoNCnNraW5wYXJhbSB7DQogICAgQXJyb3dDb2xvciAjY2NjDQogICAgQ29tcG9uZW50QmFja2dyb3VuZENvbG9yICMwMDJhMzYNCiAgICBDb21wb25lbnRCb3JkZXJDb2xvciAjY2NjDQogICAgQ29tcG9uZW50Rm9udENvbG9yICNjY2MNCiAgICBOb3RlQmFja2dyb3VuZENvbG9yICMwMDJhMzYNCiAgICBOb3RlQm9yZGVyQ29sb3IgI2NjYw0KICAgIE5vdGVGb250Q29sb3IgI2NjYw0KICAgIFBhY2thZ2VCb3JkZXJDb2xvciAjY2NjDQogICAgUGFja2FnZUZvbnRDb2xvciAjY2NjDQogICAgYmFja2dyb3VuZENvbG9yICMwMDJhMzYNCn0NCg0KW+aWh+S7tuS7k+W6k10gYXMgZmlsZVN0b3JlDQoNCnBhY2thZ2UgIuWFqOiKgueCuSIgYXMgRnVsbE5vZGVzIHsNCiAgICBb5YWo6IqC54K5Ml0gYXMgRnVsbE5vZGUyDQogICAgW+WFqOiKgueCuTFdIGFzIEZ1bGxOb2RlMQ0KfQ0KDQpwYWNrYWdlICLovbvoioLngrkiIGFzIExpZ2h0Tm9kZXMgew0KICAgIFvovbvoioLngrk0XSBhcyBMaWdodE5vZGU0DQogICAgW+i9u+iKgueCuTNdIGFzIExpZ2h0Tm9kZTMNCiAgICBb6L276IqC54K5Ml0gYXMgTGlnaHROb2RlMg0KICAgIFvovbvoioLngrkxXSBhcyBMaWdodE5vZGUxDQp9DQoNCnBhY2thZ2UgIuWuouaIt+iKgueCuSIgYXMgQ2xpZW50Tm9kZXMgew0KICAgIFvlrqLmiLfoioLngrk0XSBhcyBDbGllbnROb2RlNA0KICAgIFvlrqLmiLfoioLngrkzXSBhcyBDbGllbnROb2RlMw0KICAgIFvlrqLmiLfoioLngrkyXSBhcyBDbGllbnROb2RlMg0KICAgIFvlrqLmiLfoioLngrkxXSBhcyBDbGllbnROb2RlMQ0KfQ0KDQpbSVBGU10gPC0gLSBmaWxlU3RvcmUNClvlhbbku5bmlofku7bns7vnu59dIDwtIC0gZmlsZVN0b3JlDQpb6Ieq5a6e546w5paH5Lu257O757ufXSA8LSAtIGZpbGVTdG9yZQ0KDQpub3RlIGxlZnQgb2YgZmlsZVN0b3JlDQogICAgMS4g5a2Y5pS+5omA5pyJ5p2h55uu5paH5Lu277yM54q25oCB5paH5Lu2DQogICAgMi4g5Li66IqC54K56YCa6L+H5paH5Lu255qE5ZSv5LiA5qCH6K+GKOe0ouW8lSkNCiAgICAzLiDnu7TmiqTntKLlvJXkuI7lhbbku5bns7vnu5/mlofku7YgSWQg55qE5pig5bCE5YWz57O7DQplbmQgbm90ZQ0KDQpmaWxlU3RvcmUgPC0gLSBGdWxsTm9kZTENCmZpbGVTdG9yZSA8LSAtIEZ1bGxOb2RlMg0KDQpub3RlIHRvcCBvZiBGdWxsTm9kZXMNCiAgICAxLiDlrZjmlL7ljLrlnZfmlofku7bvvIznirbmgIHmlofku7YNCiAgICAyLiDpqozor4ENCiAgICAzLiDkuIrkvKDmnaHnm67mlofku7bliLAg5paH5Lu25LuT5bqTDQogICAgNC4g57yT5a2Y6YOo5YiG5p2h55uuDQplbmQgbm90ZQ0KRnVsbE5vZGUxIDwtIC0gTGlnaHROb2RlMQ0KRnVsbE5vZGUxIDwtIC0gTGlnaHROb2RlMg0KDQpub3RlIHRvcCBvZiBMaWdodE5vZGVzDQogICAgMS4g5a2Y5pS+5omA5pyJ5p2h55uu5ZOI5biMDQogICAgMi4g5oyJ54Wn5a6i5oi36IqC54K555qE5Lqk5piT6K+35rGC5b2i5oiQ5p2h55uuDQogICAgMy4g6YOo5YiG6aqM6K+BDQogICAgNC4g5omT5YyF5Yy65Z2X77yM5LiK5Lyg57uZ5YWo6IqC54K5DQplbmQgbm90ZQ0KRnVsbE5vZGUyIDwtIC0gTGlnaHROb2RlMw0KRnVsbE5vZGUyIDwtIC0gTGlnaHROb2RlNA0KDQpub3RlIHRvcCBvZiBDbGllbnROb2Rlcw0KICAgIDEuIOWtmOaUvuS4juacrOiKgueCueebuOWFs+eahOS/oeaBrw0KICAgIDIuIOWPkemAgeS6pOaYk+ivt+axgue7mei9u+iKgueCuQ0KZW5kIG5vdGUNCkxpZ2h0Tm9kZTEgPC0gLSBDbGllbnROb2RlMQ0KTGlnaHROb2RlMiA8LSAtIENsaWVudE5vZGUyDQpMaWdodE5vZGUzIDwtIC0gQ2xpZW50Tm9kZTMNCkxpZ2h0Tm9kZTQgPC0gLSBDbGllbnROb2RlNA0KDQoNCkBlbmR1bWwNCgpQbGFudFVNTCB2ZXJzaW9uIDEuMjAxOC4xMihTdW4gT2N0IDIxIDE4OjE1OjE1IENTVCAyMDE4KQooR1BMIHNvdXJjZSBkaXN0cmlidXRpb24pCkphdmEgUnVudGltZTogSmF2YShUTSkgU0UgUnVudGltZSBFbnZpcm9ubWVudApKVk06IEphdmEgSG90U3BvdChUTSkgNjQtQml0IFNlcnZlciBWTQpKYXZhIFZlcnNpb246IDEuOC4wXzEwMS1iMTMKT3BlcmF0aW5nIFN5c3RlbTogTWFjIE9TIFgKT1MgVmVyc2lvbjogMTAuMTQuMQpEZWZhdWx0IEVuY29kaW5nOiBVVEYtOApMYW5ndWFnZTogZW4KQ291bnRyeTogVVMKLS0+PC9nPjwvc3ZnPg==" title="" /></p>
<h3 id="21">2.1 全节点<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<ol>
<li>存放区块文件，状态文件</li>
<li>验证</li>
<li>上传条目文件到 文件仓库</li>
<li>缓存部分条目</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>IPFS 只负责存储文件，并不参与业务逻辑，如何解析文件内容，还需要全节点来负责。
IPFS 的 FileId 虽然也是内容哈希，但与区块哈希的计算规则并不相同，所以需要保存映射关系</p>
</div>
<h3 id="22">2.2 轻节点<a class="headerlink" href="#22" title="Permanent link">&para;</a></h3>
<ol>
<li>存放所有条目哈希，在接到客户节点交易请求时可根据条目哈希从全节点获取条目数据，进行验证</li>
<li>按照客户节点的交易请求形成条目</li>
<li>部分验证</li>
<li>打包区块，上传给全节点</li>
</ol>
<h3 id="23">2.3 客户节点<a class="headerlink" href="#23" title="Permanent link">&para;</a></h3>
<ol>
<li>保存与本节点相关的信息，最大化减少数据存储量，增强客户节点的可用性</li>
</ol>
<h2 id="3">3 同步<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 被动同步<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<h4 id="311">3.1.1 被动同步时机<a class="headerlink" href="#311" title="Permanent link">&para;</a></h4>
<h4 id="3111-newblockhashmsg">3.1.1.1 NewBlockHashMsg<a class="headerlink" href="#3111-newblockhashmsg" title="Permanent link">&para;</a></h4>
<p>全节点</p>
<div class="mermaid">sequenceDiagram
participant L as Local FullNode
participant P as Peer FullNode

P -&gt;&gt; L: NewBlockHashMsg
L -&gt;&gt; L: CheckHashExist
L -&gt;&gt; P: GetBlockMsg
P --&gt;&gt; L: BlockMsg
L -&gt;&gt; L: SaveBlock Send NewBlockHashMsg
</div>

<p>过程描述:</p>
<ol>
<li>Peer FullNode 在存入新区块，或获取新区块之后 发出 NewBlockHashMsg</li>
<li>Local FullNode 获取到 NewBlockHashMsg，在本地进行对比，若不存在，则发出 GetBlockMsg 给 Peer FullNode</li>
<li>Peer FullNode 获取到 GetBlockMsg 后，从本地查询并通过 BlockMsg 将 Block 信息发送给 Local FullNode</li>
<li>Local FullNode 在拿到 Block 信息之后，计算 Block，Item 等信息的索引，并将 Block，相关索引保存</li>
</ol>
<p>轻节点</p>
<div class="mermaid">sequenceDiagram
participant L as Local LightNode
participant P as Peer FullNode

P -&gt;&gt; L: NewBlockHashMsg
L -&gt;&gt; L: CheckHashExist
L -&gt;&gt; P: GetBlockHashMsg
P --&gt;&gt; L: BlockHashMsg
L -&gt;&gt; L: SaveHash SaveItemHash</div>

<p>过程描述:</p>
<ol>
<li>Peer FullNode 在存入区块，或获取新区块之后 发出 NewBlockHashMsg</li>
<li>Local LightNode 获取到 NewBlockHashMsg，在本地进行对比，若不存在，则发出 GetBlockHashMsg 给 Peer FullNode</li>
<li>Peer FullNode 通过 BlockHashMsg 将 BlockHash, ItemHash 等信息发送给 Local ClientNode</li>
<li>Local ClientNode 保存 BlockHash, ItemHash 等信息</li>
</ol>
<div class="admonition note">
<p class="admonition-title">BlockHashMsg</p>
<p>BlockHashMsg 会包含区块当中的 条目 Hash</p>
</div>
<h2 id="32">3.2 主动同步<a class="headerlink" href="#32" title="Permanent link">&para;</a></h2>
<h3 id="321">3.2.1 主动同步时机<a class="headerlink" href="#321" title="Permanent link">&para;</a></h3>
<h4 id="3211">3.2.1.1 新节点加入<a class="headerlink" href="#3211" title="Permanent link">&para;</a></h4>
<p>全节点</p>
<div class="mermaid">sequenceDiagram
participant L as Local FullNode
participant P as Peer FullNode

L -&gt;&gt; P: GetHeaderHashMsg
P --&gt;&gt; L: HeaderHashMsg
L -&gt;&gt; P: GetBlockMsg
P --&gt;&gt; L: BlockMsg
L -&gt;&gt; L: SaveBlock</div>

<p>过程描述:</p>
<ol>
<li>当一个新的全节点加入，会循环向其他 FullNode 发出 GetHeaderHashMsg</li>
<li>远端 FullNode 发送 HeaderHashMsg 给本节点</li>
<li>本节点根据 HeaderHash 向远端节点 发出 GetBlockMsg </li>
<li>远端 FullNode 发送 BlockMsg 给本节点</li>
<li>本节点进行数据保存</li>
</ol>
<p>轻节点</p>
<div class="mermaid">sequenceDiagram
participant L as Local LightNode
participant P as Peer LightNode

L -&gt;&gt; P: GetHeaderHashMsg
P --&gt;&gt; L: HeaderHashMsg
L -&gt;&gt; L: SaveHash</div>

<p>过程描述:</p>
<ol>
<li>当一个新的全节点加入，会循环向其他 FullNode 发出 GetHeaderHashMsg</li>
<li>远端 FullNode 发送 HeaderHashMsg 给本节点</li>
<li>本节点进行数据保存</li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../eos/structure/" title="结构" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                结构
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../assets/javascripts/lunr/lunr.cn.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
      
        <script src="../../js/material_nav_extend.js"></script>
      
    
    
      
    
  </body>
</html>